<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>시작 페이지 | NTZ Fit</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🚗</text></svg>">
  <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
</head>
<body>
  <div class="container" style="max-width:920px">
    <!-- 헤더 -->
    <header class="header">
      <div class="logo">
        <h1>🚀 NTZ Fit 시작하기</h1>
        <span class="role-badge">Step 1/3 • 기본 정보</span>
      </div>
      <div class="progress">
        <span class="time">Step 1</span>
        <div class="scenario-info">이름 / 생년월일(YYYYMMDD)</div>
      </div>
    </header>

    <!-- 입력 카드 -->
    <div class="modal-content" style="margin:20px auto; max-width:920px; width:100%;">
      <h3>참여자 정보 입력</h3>
      <p>이름과 생년월일(YYYYMMDD)을 입력하면 설문으로 이동합니다.</p>

      <div class="input-group">
        <label for="username">이름 *</label>
        <input type="text" id="username" placeholder="홍길동" autocomplete="name" required>
      </div>

      <div class="input-group">
        <label for="birthdate">생년월일 (YYYYMMDD) *</label>
        <input
          type="text"
          id="birthdate"
          placeholder="예: 19991231"
          inputmode="numeric"
          autocomplete="bday"
          maxlength="8"
          oninput="enforceYMD(this)"
          required
        >
        <small class="scenario-info" id="birthHint">숫자 8자리만 입력 가능합니다.</small>
      </div>

      <div class="modal-buttons" style="display:flex; gap:10px; justify-content:center;">
        <button class="start-button" onclick="goToSurvey()">다음 (설문으로)</button>
        <button class="start-button" style="background:var(--warning-color);" onclick="goToAdmin()">관리자 페이지</button>
      </div>
    </div>

    <footer class="copyright">
      <p>© 2025 NTZ Fit 시뮬레이터. All rights reserved.</p>
      <p>Originated by <strong>Gaon</strong> customized.LEO</p>
    </footer>
  </div>

  <script>
    // 숫자만, 최대 8자리 고정
    function enforceYMD(input) {
      input.value = input.value.replace(/\D/g, '').slice(0, 8);
    }

    // YYYYMMDD 유효성 검사
    function isValidYYYYMMDD(ymd) {
      if (!/^\d{8}$/.test(ymd)) return false;
      const year  = parseInt(ymd.slice(0, 4), 10);
      const month = parseInt(ymd.slice(4, 6), 10);
      const day   = parseInt(ymd.slice(6, 8), 10);
      if (year < 1900 || year > 2100) return false;
      if (month < 1 || month > 12) return false;
      if (day < 1 || day > 31) return false;
      const d = new Date(year, month - 1, day);
      if (
        d.getFullYear() !== year ||
        d.getMonth() + 1 !== month ||
        d.getDate() !== day
      ) return false;
      return true;
    }

    function goToSurvey() {
      const name = document.getElementById('username').value.trim();
      const ymd  = document.getElementById('birthdate').value.trim();
      const hint = document.getElementById('birthHint');

      if (!name) {
        alert('이름을 입력해주세요.');
        return;
      }
      if (!isValidYYYYMMDD(ymd)) {
        hint.textContent = '형식이 올바르지 않습니다. 예: 19991231 / 존재하는 날짜여야 합니다.';
        hint.style.color = 'var(--error-color)';
        document.getElementById('birthdate').focus();
        return;
      }
      hint.textContent = '숫자 8자리만 입력 가능합니다.';
      hint.style.color = 'var(--text-secondary)';
      localStorage.setItem('username', name);
      localStorage.setItem('birthdate', ymd);
      window.location.href = 'survey.html';
    }

    function goToAdmin() {
      const pass = prompt('관리자 비밀번호를 입력하세요:');
      if (pass === '1234') {
        window.location.href = 'admin.html';
      } else if (pass !== null) {
        alert('비밀번호가 올바르지 않습니다.');
      }
    }
  </script>
</body>
</html>
