<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ì‹œì‘ í˜ì´ì§€ | NTZ Fit</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸš—</text></svg>">
  <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
</head>
<body>
  <div class="container" style="max-width:920px">
    <!-- í—¤ë” -->
    <header class="header">
      <div class="logo">
        <h1>ğŸš€ NTZ Fit ì‹œì‘í•˜ê¸°</h1>
        <span class="role-badge">Step 1/3 â€¢ ê¸°ë³¸ ì •ë³´</span>
      </div>
      <div class="progress">
        <span class="time">Step 1</span>
        <div class="scenario-info">ì´ë¦„ / ìƒë…„ì›”ì¼(YYYYMMDD)</div>
      </div>
    </header>

    <!-- ì…ë ¥ ì¹´ë“œ -->
    <div class="modal-content" style="margin:20px auto; max-width:920px; width:100%;">
      <h3>ì°¸ì—¬ì ì •ë³´ ì…ë ¥</h3>
      <p>ì´ë¦„ê³¼ ìƒë…„ì›”ì¼(YYYYMMDD)ì„ ì…ë ¥í•˜ë©´ ì„¤ë¬¸ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.</p>

      <div class="input-group">
        <label for="username">ì´ë¦„ *</label>
        <input type="text" id="username" placeholder="í™ê¸¸ë™" autocomplete="name" required>
      </div>

      <div class="input-group">
        <label for="birthdate">ìƒë…„ì›”ì¼ (YYYYMMDD) *</label>
        <input
          type="text"
          id="birthdate"
          placeholder="ì˜ˆ: 19991231"
          inputmode="numeric"
          autocomplete="bday"
          maxlength="8"
          oninput="enforceYMD(this)"
          required
        >
        <small class="scenario-info" id="birthHint">ìˆ«ì 8ìë¦¬ë§Œ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.</small>
      </div>

      <div class="modal-buttons" style="display:flex; gap:10px; justify-content:center;">
        <button class="start-button" onclick="goToSurvey()">ë‹¤ìŒ (ì„¤ë¬¸ìœ¼ë¡œ)</button>
        <button class="start-button" style="background:var(--warning-color);" onclick="goToAdmin()">ê´€ë¦¬ì í˜ì´ì§€</button>
      </div>
    </div>

    <footer class="copyright">
      <p>Â© 2025 NTZ Fit ì‹œë®¬ë ˆì´í„°. All rights reserved.</p>
      <p>Originated by <strong>Gaon</strong> customized.LEO</p>
    </footer>
  </div>

  <script>
    // ìˆ«ìë§Œ, ìµœëŒ€ 8ìë¦¬ ê³ ì •
    function enforceYMD(input) {
      input.value = input.value.replace(/\D/g, '').slice(0, 8);
    }

    // YYYYMMDD ìœ íš¨ì„± ê²€ì‚¬
    function isValidYYYYMMDD(ymd) {
      if (!/^\d{8}$/.test(ymd)) return false;
      const year  = parseInt(ymd.slice(0, 4), 10);
      const month = parseInt(ymd.slice(4, 6), 10);
      const day   = parseInt(ymd.slice(6, 8), 10);
      if (year < 1900 || year > 2100) return false;
      if (month < 1 || month > 12) return false;
      if (day < 1 || day > 31) return false;
      const d = new Date(year, month - 1, day);
      if (
        d.getFullYear() !== year ||
        d.getMonth() + 1 !== month ||
        d.getDate() !== day
      ) return false;
      return true;
    }

    function goToSurvey() {
      const name = document.getElementById('username').value.trim();
      const ymd  = document.getElementById('birthdate').value.trim();
      const hint = document.getElementById('birthHint');

      if (!name) {
        alert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      if (!isValidYYYYMMDD(ymd)) {
        hint.textContent = 'í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. ì˜ˆ: 19991231 / ì¡´ì¬í•˜ëŠ” ë‚ ì§œì—¬ì•¼ í•©ë‹ˆë‹¤.';
        hint.style.color = 'var(--error-color)';
        document.getElementById('birthdate').focus();
        return;
      }
      hint.textContent = 'ìˆ«ì 8ìë¦¬ë§Œ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.';
      hint.style.color = 'var(--text-secondary)';
      localStorage.setItem('username', name);
      localStorage.setItem('birthdate', ymd);
      window.location.href = 'survey.html';
    }

    function goToAdmin() {
      const pass = prompt('ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:');
      if (pass === '1234') {
        window.location.href = 'admin.html';
      } else if (pass !== null) {
        alert('ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
      }
    }
  </script>
</body>
</html>
